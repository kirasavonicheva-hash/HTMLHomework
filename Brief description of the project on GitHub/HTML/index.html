<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LazyResume Pro ¬∑ AI –†–µ–∑—é–º–µ –∏–∑ GitHub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        body {
            background: linear-gradient(145deg, #0B1120 0%, #1A2538 100%);
            min-height: 100vh;
            padding: 24px;
            color: #E2E8F0;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 20px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .logo-icon {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .logo h1 {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #60A5FA, #C084FC);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }
        .badge {
            background: rgba(96, 165, 250, 0.1);
            border: 1px solid rgba(96, 165, 250, 0.3);
            padding: 8px 20px;
            border-radius: 100px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }
        .badge i {
            color: #60A5FA;
        }
        .input-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 32px;
            padding: 32px;
            margin-bottom: 32px;
        }
        .input-grid {
            display: grid;
            grid-template-columns: 2fr 2fr 1.5fr auto;
            gap: 16px;
            align-items: end;
        }
        .input-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .input-field label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #94A3B8;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .input-field input, .input-field select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 14px 18px;
            color: white;
            font-size: 1rem;
            transition: all 0.2s;
            width: 100%;
        }
        .input-field input:focus, .input-field select:focus {
            outline: none;
            border-color: #60A5FA;
            background: rgba(96, 165, 250, 0.1);
        }
        .api-section {
            grid-column: span 4;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .api-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        .api-header i {
            font-size: 1.5rem;
            color: #10B981;
        }
        .api-input-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .api-input-group input {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 14px 18px;
            color: white;
            font-family: monospace;
            font-size: 0.95rem;
        }
        .api-input-group input:focus {
            border-color: #10B981;
        }
        .api-status {
            padding: 8px 16px;
            border-radius: 100px;
            font-size: 0.85rem;
            background: rgba(239, 68, 68, 0.1);
            color: #FCA5A5;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .api-status.valid {
            background: rgba(16, 185, 129, 0.1);
            color: #6EE7B7;
        }
        .generate-btn {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            border: none;
            border-radius: 24px;
            padding: 16px 32px;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            white-space: nowrap;
            transition: all 0.2s;
            width: 100%;
            justify-content: center;
        }
        .generate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.5);
        }
        .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 32px;
        }
        .settings-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 32px;
            padding: 28px;
            height: fit-content;
        }
        .settings-section {
            margin-bottom: 28px;
        }
        .settings-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: #E2E8F0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .template-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .template-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .template-option:hover {
            background: rgba(96, 165, 250, 0.1);
            border-color: #60A5FA;
        }
        .template-option.active {
            background: rgba(96, 165, 250, 0.15);
            border-color: #60A5FA;
            box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.3);
        }
        .template-option i {
            font-size: 2rem;
            color: #60A5FA;
            margin-bottom: 8px;
        }
        .slider-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 16px;
        }
        .slider-container input {
            width: 100%;
            margin: 10px 0;
        }
        .stats-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 16px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .resume-card {
            background: white;
            border-radius: 32px;
            padding: 40px;
            color: #1E293B;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        .resume-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #E2E8F0;
        }
        .resume-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #0F172A;
        }
        .resume-header h2 small {
            font-size: 1rem;
            font-weight: 400;
            color: #64748B;
            display: block;
            margin-top: 4px;
        }
        .resume-actions {
            display: flex;
            gap: 12px;
        }
        .resume-btn {
            background: #F1F5F9;
            border: none;
            border-radius: 40px;
            padding: 12px 24px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #334155;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .resume-btn:hover {
            background: #E2E8F0;
        }
        .resume-grid {
            display: grid;
            grid-template-columns: 0.8fr 2fr;
            gap: 30px;
        }
        .resume-sidebar {
            background: #F8FAFC;
            border-radius: 24px;
            padding: 24px;
        }

        .resume-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 3rem;
            font-weight: 600;
        }

        .resume-contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            color: #475569;
            font-size: 0.95rem;
            border-bottom: 1px dashed #E2E8F0;
        }

        .resume-contact-item i {
            width: 20px;
            color: #3B82F6;
        }

        .ai-badge {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            color: white;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-top: 16px;
        }
        .resume-main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        .resume-section {
            margin-bottom: 20px;
        }
        .resume-section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0F172A;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 3px solid #E2E8F0;
        }
        .summary-text {
            background: #F8FAFC;
            padding: 20px;
            border-radius: 16px;
            line-height: 1.6;
            color: #334155;
            font-size: 0.95rem;
        }
        .project-item {
            background: #F8FAFC;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
        }
        .project-title {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            color: #0F172A;
            margin-bottom: 6px;
        }
        .project-meta {
            font-size: 0.85rem;
            color: #64748B;
            display: flex;
            gap: 12px;
            margin-bottom: 8px;
        }
        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .skill-tag {
            background: #E2E8F0;
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 0.9rem;
            color: #1E293B;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .loading-content {
            background: #1E293B;
            padding: 40px;
            border-radius: 40px;
            text-align: center;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(59, 130, 246, 0.3);
            border-top-color: #3B82F6;
            border-radius: 50%;
            animation: spin 1s infinite linear;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .loading-step {
            color: #60A5FA;
            margin-top: 16px;
            font-size: 0.95rem;
        }
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #FCA5A5;
            padding: 16px;
            border-radius: 16px;
            margin-top: 16px;
            display: none;
        }
        .error-message.show {
            display: block;
        }
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            .input-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-brain logo-icon"></i>
                <h1>LazyResume AI</h1>
            </div>
            <div class="badge">
                <i class="fas fa-bolt"></i>
                <span>GPT-4 ¬∑ –†–µ–∞–ª—å–Ω—ã–π AI</span>
            </div>
        </div>
        <div class="input-card">
            <div class="input-grid">
                <div class="input-field">
                    <label><i class="fab fa-github"></i> GitHub username</label>
                    <input type="text" id="githubInput" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: octocat" value="octocat">
                </div>
                <div class="input-field">
                    <label><i class="fab fa-linkedin"></i> LinkedIn (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <input type="text" id="linkedinInput" placeholder="username">
                </div>
                <div class="input-field">
                    <label><i class="fas fa-globe"></i> –Ø–∑—ã–∫ —Ä–µ–∑—é–º–µ</label>
                    <select id="languageSelect">
                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="input-field">
                    <label><i class="fas fa-paint-brush"></i> –°—Ç–∏–ª—å</label>
                    <select id="styleSelect">
                        <option value="professional">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                        <option value="creative">–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π</option>
                        <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π</option>
                    </select>
                </div>
            </div>
            <div class="api-section">
                <div class="api-header">
                    <i class="fas fa-key"></i>
                    <span style="font-weight: 600;">OpenAI API –∫–ª—é—á</span>
                    <span class="api-status" id="apiStatus">
                        <i class="fas fa-exclamation-circle"></i> –ù–µ –∞–∫—Ç–∏–≤–µ–Ω
                    </span>
                </div>
                <div class="api-input-group">
                    <input type="password" id="apiKeyInput" placeholder="sk-... –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á OpenAI">
                    <button class="generate-btn" id="generateBtn" style="width: auto; padding: 14px 28px;">
                        <i class="fas fa-magic"></i>
                        –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ
                    </button>
                </div>
            </div>

            <div id="errorMessage" class="error-message"></div>
        </div>
        <div class="main-grid">
            <div class="settings-panel">
                <div class="settings-section">
                    <div class="settings-title">
                        <i class="fas fa-file-alt"></i>
                        –®–∞–±–ª–æ–Ω —Ä–µ–∑—é–º–µ
                    </div>
                    <div class="template-selector">
                        <div class="template-option active" data-template="modern">
                            <i class="fas fa-laptop"></i>
                            <div>Modern</div>
                        </div>
                        <div class="template-option" data-template="classic">
                            <i class="fas fa-briefcase"></i>
                            <div>Classic</div>
                        </div>
                        <div class="template-option" data-template="creative">
                            <i class="fas fa-paint-brush"></i>
                            <div>Creative</div>
                        </div>
                        <div class="template-option" data-template="minimal">
                            <i class="fas fa-circle"></i>
                            <div>Minimal</div>
                        </div>
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-title">
                        <i class="fas fa-sliders-h"></i>
                        AI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </div>
                    <div class="slider-container">
                        <label style="display: block; margin-bottom: 8px;">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞)</label>
                        <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
                        <div style="display: flex; justify-content: space-between;">
                            <span>–¢–æ—á–Ω–µ–µ</span>
                            <span id="tempValue">0.7</span>
                            <span>–ö—Ä–µ–∞—Ç–∏–≤–Ω–µ–µ</span>
                        </div>
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-title">
                        <i class="fas fa-chart-bar"></i>
                        GitHub —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </div>
                    <div class="stats-card" id="githubStats">
                        <div style="text-align: center; color: #94A3B8; padding: 20px;">
                            <i class="fas fa-github" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>–í–≤–µ–¥–∏—Ç–µ username –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="resume-card" id="resumeCard">
                <div class="resume-header">
                    <h2 id="resumeName">
                        –ì–æ—Ç–æ–≤–æ–µ —Ä–µ–∑—é–º–µ
                        <small id="resumeLogin">@username</small>
                    </h2>
                    <div class="resume-actions">
                        <button class="resume-btn" id="copyResumeBtn">
                            <i class="far fa-copy"></i>
                            –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="resume-btn" id="downloadPdfBtn">
                            <i class="fas fa-download"></i>
                            PDF
                        </button>
                    </div>
                </div>
                <div class="resume-grid">
                    <div class="resume-sidebar">
                        <div class="resume-avatar" id="resumeAvatar">?</div>
                        <div class="resume-contact-item">
                            <i class="fab fa-github"></i>
                            <span id="resumeGithub">‚Äî</span>
                        </div>
                        <div class="resume-contact-item">
                            <i class="fab fa-linkedin"></i>
                            <span id="resumeLinkedin">‚Äî</span>
                        </div>
                        <div class="resume-contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="resumeLocation">‚Äî</span>
                        </div>
                        <div class="resume-contact-item">
                            <i class="fas fa-code-branch"></i>
                            <span id="resumeRepos">‚Äî</span>
                        </div>
                        <span class="ai-badge">
                            <i class="fas fa-robot"></i> AI Generated
                        </span>
                    </div>
                    <div class="resume-main">
                        <div class="resume-section">
                            <h3><i class="fas fa-star"></i> –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                            <div class="summary-text" id="aiSummary">
                                –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ" –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-–æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö GitHub –¥–∞–Ω–Ω—ã—Ö.
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-cubes"></i> –¢–æ–ø –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
                            <div id="projectsList">
                                <div class="project-item">
                                    <div class="project-title">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤...</div>
                                </div>
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-code"></i> –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
                            <div class="skill-tags" id="skillsList">
                                <span class="skill-tag">‚Äî</span>
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-lightbulb"></i> AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                            <div class="summary-text" id="aiRecommendations" style="font-style: italic;">
                                –ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 style="color: white; margin-bottom: 10px;">AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –∫–æ–¥</h3>
            <p style="color: #94A3B8;" id="loadingMessage">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å GitHub...</p>
            <div class="loading-step" id="loadingStep">
                –®–∞–≥ 1/3: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
            </div>
        </div>
    </div>
    <script>
        (function() {
            const githubInput = document.getElementById('githubInput');
            const linkedinInput = document.getElementById('linkedinInput');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const generateBtn = document.getElementById('generateBtn');
            const errorDiv = document.getElementById('errorMessage');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingMessage = document.getElementById('loadingMessage');
            const loadingStep = document.getElementById('loadingStep');
            const apiStatus = document.getElementById('apiStatus');
            const temperatureInput = document.getElementById('temperature');
            const tempValue = document.getElementById('tempValue');
            const languageSelect = document.getElementById('languageSelect');
            const styleSelect = document.getElementById('styleSelect');
            const resumeName = document.getElementById('resumeName');
            const resumeLogin = document.getElementById('resumeLogin');
            const resumeAvatar = document.getElementById('resumeAvatar');
            const resumeGithub = document.getElementById('resumeGithub');
            const resumeLinkedin = document.getElementById('resumeLinkedin');
            const resumeLocation = document.getElementById('resumeLocation');
            const resumeRepos = document.getElementById('resumeRepos');
            const aiSummary = document.getElementById('aiSummary');
            const aiRecommendations = document.getElementById('aiRecommendations');
            const projectsList = document.getElementById('projectsList');
            const skillsList = document.getElementById('skillsList');
            const githubStats = document.getElementById('githubStats');
            let currentUser = null;
            let currentRepos = [];
            temperatureInput.addEventListener('input', () => {
                tempValue.textContent = temperatureInput.value;
            });
            apiKeyInput.addEventListener('input', () => {
                const key = apiKeyInput.value.trim();
                if (key.startsWith('sk-') && key.length > 20) {
                    apiStatus.innerHTML = '<i class="fas fa-check-circle"></i> –ö–ª—é—á –≤–∞–ª–∏–¥–Ω—ã–π';
                    apiStatus.classList.add('valid');
                } else {
                    apiStatus.innerHTML = '<i class="fas fa-exclamation-circle"></i> –ù–µ –∞–∫—Ç–∏–≤–µ–Ω';
                    apiStatus.classList.remove('valid');
                }
            });
            async function fetchGitHubData(username) {
                loadingStep.innerText = '–®–∞–≥ 1/3: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...';
                
                const userRes = await fetch(`https://api.github.com/users/${username}`);
                if (!userRes.ok) {
                    if (userRes.status === 404) throw new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    throw new Error(`–û—à–∏–±–∫–∞ GitHub: ${userRes.status}`);
                }
                const user = await userRes.json();
                loadingStep.innerText = '–®–∞–≥ 2/3: –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤...';
                const reposRes = await fetch(`https://api.github.com/users/${username}/repos?sort=stars&per_page=10`);
                const repos = await reposRes.json();
                return { user, repos };
            }
            function createAIPrompt(user, repos, language, style, temperature) {
                const repoList = repos.map(r => 
                    `- ${r.name}: ${r.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'} (‚≠ê ${r.stargazers_count}, üç¥ ${r.forks_count}, —è–∑—ã–∫: ${r.language || '–Ω–µ —É–∫–∞–∑–∞–Ω'})`
                ).join('\n');
                const languages = [...new Set(repos.map(r => r.language).filter(l => l))].join(', ');
                const styleGuide = {
                    professional: '–¥–µ–ª–æ–≤–æ–π, —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö –∏ —Ü–∏—Ñ—Ä–∞—Ö',
                    creative: '–∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞',
                    technical: '—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π, –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–µ–∫–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π'
                };
                return `–°–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ GitHub –¥–∞–Ω–Ω—ã—Ö:
–ü–†–û–§–ò–õ–¨:
- –ò–º—è: ${user.name || user.login}
- –õ–æ–≥–∏–Ω: ${user.login}
- –õ–æ–∫–∞—Ü–∏—è: ${user.location || '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤: ${user.public_repos}
- –ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${user.followers}
- –ê–∫–∫–∞—É–Ω—Ç —Å: ${new Date(user.created_at).getFullYear()}

–¢–û–ü –ü–†–û–ï–ö–¢–û–í (–ø–æ –∑–≤–µ–∑–¥–∞–º):
${repoList}

–û–°–ù–û–í–ù–´–ï –Ø–ó–´–ö–ò: ${languages || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã'}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø:
1. –Ø–∑—ã–∫: ${language === 'ru' ? '–†—É—Å—Å–∫–∏–π' : 'English'}
2. –°—Ç–∏–ª—å: ${styleGuide[style]}
3. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${temperature}

–°–¢–†–£–ö–¢–£–†–ê –û–¢–í–ï–¢–ê:
[SUMMARY] - –∫—Ä–∞—Ç–∫–æ–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–∞–º–º–∞—Ä–∏ (3-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
[SKILLS] - —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
[EXPERIENCE] - –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—ã—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã)
[RECOMMENDATIONS] - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é (2-3 —Å–æ–≤–µ—Ç–∞)

–í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ GitHub, –¥–æ–±–∞–≤–ª—è–π —Ü–∏—Ñ—Ä—ã (–∑–≤–µ–∑–¥—ã, —Ñ–æ—Ä–∫–∏, –≥–æ–¥—ã).`;
            }

            async function callOpenAI(apiKey, prompt, temperature) {
                loadingStep.innerText = '–®–∞–≥ 3/3: AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∑—é–º–µ...';
                
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4',
                        messages: [
                            {
                                role: 'system',
                                content: '–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π HR –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ä–µ–∫—Ä—É—Ç–µ—Ä. –°–æ–∑–¥–∞–≤–∞–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—é–º–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ GitHub –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –∏ —Ñ–∞–∫—Ç—ã.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        temperature: parseFloat(temperature),
                        max_tokens: 1500
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || '–û—à–∏–±–∫–∞ OpenAI API');
                }

                const data = await response.json();
                return data.choices[0].message.content;
            }
            function parseAIResponse(aiText) {
                return {
                    summary: aiText.match(/\[SUMMARY\](.*?)(?=\[SKILLS\]|$)/s)?.[1]?.trim() || aiText,
                    skills: aiText.match(/\[SKILLS\](.*?)(?=\[EXPERIENCE\]|$)/s)?.[1]?.trim() || '',
                    experience: aiText.match(/\[EXPERIENCE\](.*?)(?=\[RECOMMENDATIONS\]|$)/s)?.[1]?.trim() || '',
                    recommendations: aiText.match(/\[RECOMMENDATIONS\](.*?)$/s)?.[1]?.trim() || '–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–≤–∏–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏ –≤ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.'
                };
            }

            function updateUI(user, repos, aiParsed, linkedinUsername) {
                resumeName.innerHTML = user.name || user.login;
                resumeLogin.innerHTML = `@${user.login}`;
                resumeAvatar.innerText = (user.name || user.login).split(' ').map(n => n[0]).join('').slice(0,2).toUpperCase();
                resumeGithub.innerText = `github.com/${user.login}`;
                resumeLinkedin.innerText = linkedinUsername ? `linkedin.com/in/${linkedinUsername}` : '–Ω–µ —É–∫–∞–∑–∞–Ω';
                resumeLocation.innerText = user.location || '–Ω–µ —É–∫–∞–∑–∞–Ω–∞';
                resumeRepos.innerText = `${user.public_repos} —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ ¬∑ ${user.followers} –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤`;
                githubStats.innerHTML = `
                    <div class="stat-row"><span>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:</span> <span style="color: #60A5FA;">${user.public_repos}</span></div>
                    <div class="stat-row"><span>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏:</span> <span style="color: #60A5FA;">${user.followers}</span></div>
                    <div class="stat-row"><span>–ü–æ–¥–ø–∏—Å–∫–∏:</span> <span style="color: #60A5FA;">${user.following}</span></div>
                    <div class="stat-row"><span>–ê–∫–∫–∞—É–Ω—Ç —Å:</span> <span style="color: #60A5FA;">${new Date(user.created_at).getFullYear()}</span></div>
                `;
                aiSummary.innerText = aiParsed.summary;
                aiRecommendations.innerText = aiParsed.recommendations;
                projectsList.innerHTML = '';
                repos.slice(0, 5).forEach(repo => {
                    const projectDiv = document.createElement('div');
                    projectDiv.className = 'project-item';
                    projectDiv.innerHTML = `
                        <div class="project-title">
                            <span>${repo.name}</span>
                            <span>‚≠ê ${repo.stargazers_count}</span>
                        </div>
                        <div class="project-meta">
                            <span><i class="fas fa-code"></i> ${repo.language || '‚Äî'}</span>
                            <span><i class="fas fa-code-branch"></i> ${repo.forks_count}</span>
                            <span><i class="far fa-calendar"></i> ${new Date(repo.updated_at).getFullYear()}</span>
                        </div>
                        <div>${repo.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</div>
                    `;
                    projectsList.appendChild(projectDiv);
                });
                let skills = [];
                if (aiParsed.skills) {
                    skills = aiParsed.skills.split(',').map(s => s.trim());
                } else {
                    skills = [...new Set(repos.map(r => r.language).filter(l => l))].slice(0, 8);
                }
                
                skillsList.innerHTML = '';
                skills.forEach(skill => {
                    if (skill) {
                        const tag = document.createElement('span');
                        tag.className = 'skill-tag';
                        tag.innerText = skill;
                        skillsList.appendChild(tag);
                    }
                });
            }
            function generatePDF() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                doc.setFontSize(24);
                doc.setTextColor(11, 17, 32);
                doc.text(resumeName.innerText, 20, 20);
                doc.setFontSize(12);
                doc.setTextColor(100, 116, 139);
                doc.text(`GitHub: ${resumeGithub.innerText}`, 20, 35);
                doc.setFontSize(16);
                doc.setTextColor(59, 130, 246);
                doc.text('–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å', 20, 55);
                doc.setFontSize(11);
                doc.setTextColor(51, 65, 85);
                const summary = doc.splitTextToSize(aiSummary.innerText, 170);
                doc.text(summary, 20, 65);
                let y = 65 + (summary.length * 7);
                doc.setFontSize(16);
                doc.setTextColor(59, 130, 246);
                doc.text('–¢–æ–ø –ø—Ä–æ–µ–∫—Ç—ã', 20, y);
                y += 10;
                const projects = document.querySelectorAll('#projectsList .project-item');
                projects.forEach((proj, i) => {
                    if (i < 3) {
                        const title = proj.querySelector('.project-title')?.innerText || '';
                        doc.setFontSize(12);
                        doc.setTextColor(11, 17, 32);
                        doc.text(title, 25, y);
                        y += 7;
                    }
                });
                doc.save('lazyresume-ai.pdf');
            }
            async function handleGenerate() {
                const githubUsername = githubInput.value.trim();
                const linkedinUsername = linkedinInput.value.trim();
                const apiKey = apiKeyInput.value.trim();
                const language = languageSelect.value;
                const style = styleSelect.value;
                const temperature = temperatureInput.value;
                if (!githubUsername) {
                    errorDiv.classList.add('show');
                    errorDiv.innerText = '–í–≤–µ–¥–∏—Ç–µ GitHub username';
                    return;
                }
                if (!apiKey || !apiKey.startsWith('sk-')) {
                    errorDiv.classList.add('show');
                    errorDiv.innerText = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π OpenAI API –∫–ª—é—á';
                    return;
                }
                errorDiv.classList.remove('show');
                loadingOverlay.style.display = 'flex';
                generateBtn.disabled = true;

                try {
                
                    loadingMessage.innerText = '–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å GitHub...';
                    const { user, repos } = await fetchGitHubData(githubUsername);
                    currentUser = user;
                    currentRepos = repos;

                    
                    const prompt = createAIPrompt(user, repos, language, style, temperature);

                
                    loadingMessage.innerText = 'AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∑—é–º–µ...';
                    const aiResponse = await callOpenAI(apiKey, prompt, temperature);

            
                    const aiParsed = parseAIResponse(aiResponse);

        
                    updateUI(user, repos, aiParsed, linkedinUsername);

                } catch (error) {
                    errorDiv.classList.add('show');
                    errorDiv.innerText = `–û—à–∏–±–∫–∞: ${error.message}`;
                } finally {
                    loadingOverlay.style.display = 'none';
                    generateBtn.disabled = false;
                }
            }

        
            document.querySelectorAll('.template-option').forEach(opt => {
                opt.addEventListener('click', function() {
                    document.querySelectorAll('.template-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    
                    
                    const template = this.dataset.template;
                    const resumeCard = document.getElementById('resumeCard');
                    const styles = {
                        modern: '32px',
                        classic: '8px',
                        creative: '60px 20px 60px 20px',
                        minimal: '16px'
                    };
                    resumeCard.style.borderRadius = styles[template] || '32px';
                });
            });

            document.getElementById('copyResumeBtn').addEventListener('click', () => {
                const text = `${resumeName.innerText}\n\n${aiSummary.innerText}\n\n–ù–∞–≤—ã–∫–∏: ${Array.from(skillsList.children).map(t => t.innerText).join(', ')}`;
                navigator.clipboard.writeText(text);
                alert('‚úÖ –†–µ–∑—é–º–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä!');
            });
        
            document.getElementById('downloadPdfBtn').addEventListener('click', generatePDF);
            
            generateBtn.addEventListener('click', handleGenerate);

            window.addEventListener('load', () => {
                if (!apiKeyInput.value) {
                    apiStatus.innerHTML = '<i class="fas fa-exclamation-circle"></i> –¢—Ä–µ–±—É–µ—Ç—Å—è API –∫–ª—é—á';
                }
            });
        })();
    </script>
</body>
</html>